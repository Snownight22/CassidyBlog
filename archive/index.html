---
layout: default
title: Diary
permalink: /archive/
---

<style>
  #closeBtn, #openBtn {
      display: none;
  }
</style>

{% if site.posts.size == 0 %}
  <h2>No post found</h2>
{% endif %}

<ul class="archive">
  {% for post in site.posts %}
    {% unless post.next %}
      <h2 id="{{ post.date | date: '%Y' }}">{{ post.date | date: '%Y' }}</h2>
    {% else %}
      {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
      {% capture nyear %}{{ post.next.date | date: '%Y' }}{% endcapture %}
      {% if year != nyear %}
        <h2 id="{{ post.date | date: '%Y' }}">{{ post.date | date: '%Y' }}</h2>
      {% endif %}
    {% endunless %}

    <li>
      {% if post.link %}
      <a href="{{ post.link }}">
      {% else %}
      <a href="{{ site.baseurl }}{{ post.url }}">
      {% endif %}
        {{ post.title }}
      </a>
      <time>{{ post.date | date: "%Y-%m-%d" }}</time>
    </li>
  {% endfor %}
</ul>

<!--添加计数-->
<script>
  var yearList = {};
  {% for post in site.posts %}
      var year = "{{ post.url | slice: 1, 4 }}";
      if (yearList[year] == null) {
        yearList[year] = 1;
      } else {
        yearList[year]++;
      }
  {% endfor %}
  for (var year in yearList) {
    document.getElementById(year).innerText = year + " " + "(" + yearList[year] +")";
  }
</script>
